---
description: 演算子を使用して変数に値を割り当てる方法について説明します。
keywords: powershell,コマンドレット
ms.date: 04/26/2020
online version: https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_assignment_operators?view=powershell-7&WT.mc_id=ps-gethelp
schema: 2.0.0
title: about_Assignment_Operators
ms.openlocfilehash: fba0c5f5e5263af15eb3d56f1c42a881057afc46
ms.sourcegitcommit: f874dc1d4236e06a3df195d179f59e0a7d9f8436
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/13/2020
ms.locfileid: "93222979"
---
# <a name="about-assignment-operators"></a>代入演算子の概要

## <a name="short-description"></a>簡単な説明
演算子を使用して変数に値を割り当てる方法について説明します。

## <a name="long-description"></a>長い説明

代入演算子は、1つまたは複数の値を変数に代入します。 割り当ての前に、値に対して数値演算を実行できます。

PowerShell では、次の代入演算子がサポートされています。

|演算子|説明                                                  |
|--------|-------------------------------------------------------------|
|=       |変数の値を指定された値に設定します。         |
|+=      |指定された値で変数の値を増やします。 |
|        |指定された値を既存の値に追加します。           |
|-=      |指定された値で変数の値を減らします。    |
|*=      |変数の値を指定した値で乗算します。|
|        |指定された値を既存の値に追加します。           |
|/=      |指定された値で変数の値を除算します。      |
|%=      |変数の値を指定された値で除算します。   |
|        |次に、剰余 (剰余) を変数に代入します。        |
|++      |変数の値を増やすか、割り当て可能なプロパティを増やします。   |
|        |配列要素を1つ。                                          |
|--      |変数の値、割り当て可能なプロパティ、またはを減らします。   |
|        |配列要素を1つ。                                          |

## <a name="syntax"></a>構文

代入演算子の構文は次のとおりです。

`<assignable-expression>` `<assignment-operator>` `<value>`

割り当て可能な式には、変数とプロパティがあります。 値には、単一の値、値の配列、またはコマンド、式、またはステートメントを指定できます。

インクリメント演算子とデクリメント演算子は単項演算子です。 各には、プレフィックスと後置バージョンがあります。

`<assignable-expression><operator>`
`<operator><assignable-expression>`

割り当て可能な式は数値であるか、数値に変換可能である必要があります。

## <a name="assigning-values"></a>値の割り当て

変数は、値を格納するメモリ空間という名前が付けられます。 変数に値を格納するには、代入演算子を使用し `=` ます。 新しい値を使用すると、変数の既存の値を置き換えることができます。また、既存の値に新しい値を追加することもできます。

基本代入演算子は等号 `=` `(ASCII 61)` です。 たとえば、次のステートメントは、値 PowerShell を変数に割り当て `$MyShell` ます。

```powershell
$MyShell = "PowerShell"
```

PowerShell で変数に値を割り当てると、変数がまだ存在しない場合は作成されます。 たとえば、次の2つの代入ステートメントの最初のステートメントは、変数を作成 `$a` し、値6をに割り当て `$a` ます。 2番目の代入ステートメントでは、12の値をに代入し `$a` ます。 最初のステートメントは、新しい変数を作成します。 2番目のステートメントは、値のみを変更します。

```powershell
$a = 6
$a = 12
```

PowerShell の変数には、キャストしない限り、特定のデータ型はありません。
変数に1つのオブジェクトしか含まれていない場合、変数はそのオブジェクトのデータ型を受け取ります。 変数にオブジェクトのコレクションが含まれている場合、変数には System.object データ型があります。 そのため、任意の型のオブジェクトをコレクションに割り当てることができます。 次の例は、エラーを生成せずに、変数にプロセスオブジェクト、サービスオブジェクト、文字列、および整数を追加できることを示しています。

```powershell
$a = Get-Process
$a += Get-Service
$a += "string"
$a += 12
```

代入演算子は `=` パイプライン演算子よりも優先順位が低いため `|` 、コマンドパイプラインの結果を変数に割り当てるためにかっこは必要ありません。 たとえば、次のコマンドは、コンピューター上のサービスを並べ替え、並べ替えられたサービスを `$a` 変数に割り当てます。

```powershell
$a = Get-Service | Sort-Object -Property name
```

次の例のように、ステートメントによって作成された値を変数に割り当てることもできます。

```powershell
$a = if ($b -lt 0) { 0 } else { $b }
```

この例で `$a` は、の値が0未満の場合、変数に0が割り当てられ `$b` ます。 の値が0未満でない場合は、の値 `$b` をに代入し `$a` `$b` ます。

### <a name="the-assignment-operator"></a>代入演算子

代入演算子は、 `=` 変数に値を代入します。 変数に既に値がある場合、代入演算子は `=` 警告なしで値を置換します。

次のステートメントでは、変数に整数値6が割り当てられ `$a` ます。

```powershell
$a = 6
```

文字列値を変数に割り当てるには、次のように文字列値を引用符で囲みます。

```powershell
$a = "baseball"
```

変数に配列 (複数値) を割り当てるには、次のように、値をコンマで区切ります。

```powershell
$a = "apple", "orange", "lemon", "grape"
```

ハッシュテーブルを変数に割り当てるには、PowerShell で標準のハッシュテーブル表記を使用します。 アットマークの後に、 `@` セミコロンで区切られ `;` 、中かっこで囲まれたキーと値のペアを入力し `{ }` ます。 たとえば、ハッシュテーブルを変数に割り当てるには `$a` 、次のように入力します。

```powershell
$a = @{one=1; two=2; three=3}
```

16進値を変数に割り当てるには、値の前にを指定 `0x` します。
PowerShell は、16進数値 (0x10) を10進値 (この場合は 16) に変換し、その値を変数に代入し `$a` ます。 たとえば、変数に0x10 の値を割り当てるには `$a` 、次のように入力します。

```powershell
$a = 0x10
```

指数値を変数に割り当てるには、ルート番号、文字、 `e` および10の倍数を表す数値を入力します。 たとえば、3.1415 の値を変数に1000の累乗に割り当てるには、次のように `$a` 入力します。

```powershell
$a = 3.1415e3
```

PowerShell では、キロバイト、メガバイト、ギガバイトをバイトに変換することもでき `KB` `MB` `GB` ます。 たとえば、変数に 10 kb の値を割り当てるには `$a` 、次のように入力します。

```powershell
$a = 10kb
```

### <a name="the-assignment-by-addition-operator"></a>加算演算子による代入

加算演算子による代入では、 `+=` 変数の値がインクリメントされるか、または指定した値が既存の値に追加されます。 アクションは、変数に数値型または文字列型があるかどうか、および変数に1つの値 (スカラー) または複数の値 (コレクション) が含まれているかどうかによって異なります。

演算子は、 `+=` 2 つの操作を結合します。 まず、を追加してから、を割り当てます。
したがって、次のステートメントは同等です。

```powershell
$a += 2
$a = ($a + 2)
```

変数に1つの数値が含まれている場合、演算子は、 `+=` 演算子の右辺にある量だけ既存の値をインクリメントします。 次に、演算子は、結果の値を変数に代入します。 次の例では、演算子を使用して `+=` 変数の値を増やす方法を示します。

```powershell
$a = 4
$a += 2
$a
```

```
6
```

変数の値が文字列の場合、演算子の右側の値が文字列に追加されます。次に例を示します。

```powershell
$a = "Windows"
$a += " PowerShell"
$a
```

```
Windows PowerShell
```

変数の値が配列の場合、演算子は `+=` 演算子の右側にある値を配列に追加します。 キャストによって配列が明示的に型指定されない限り、次のように任意の型の値を配列に追加できます。

```powershell
$a = 1,2,3
$a += 2
$a
```

```
1
2
3
2
```

and

```powershell
$a += "String"
$a
```

```
1
2
3
2
String
```

変数の値がハッシュテーブルの場合、演算子は `+=` 演算子の右側にある値をハッシュテーブルに追加します。 ただし、ハッシュテーブルに追加できる型はもう1つのハッシュテーブルだけなので、他のすべての割り当ては失敗します。

たとえば、次のコマンドは、ハッシュテーブルを変数に割り当て `$a` ます。
次に、演算子を使用して、既存のハッシュテーブル `+=` に別のハッシュテーブルを追加します。これにより、新しいキーと値のペアが既存のハッシュテーブルに実質的に追加されます。
出力に示されているように、このコマンドは成功します。

```powershell
$a = @{a = 1; b = 2; c = 3}
$a += @{mode = "write"}
$a
```

```
Name                           Value
----                           -----
a                              1
b                              2
mode                           write
c                              3
```

次のコマンドは、変数のハッシュテーブルに整数 "1" を追加しようとし `$a` ます。 このコマンドは失敗します。

```powershell
$a = @{a = 1; b = 2; c = 3}
$a += 1
```

```
You can add another hash table only to a hash table.
At line:1 char:6
+ $a += <<<<  1
```

### <a name="the-assignment-by-subtraction-operator"></a>減算演算子による代入

減算による代入演算子は、 `-=` 演算子の右辺に指定されている値によって変数の値をデクリメントします。 この演算子は、文字列変数と共に使用することはできません。また、この演算子を使用してコレクションから要素を削除することはできません。

演算子は、 `-=` 2 つの操作を結合します。 まず、を減算してから、を割り当てます。 したがって、次のステートメントは同等です。

```powershell
$a -= 2
$a = ($a - 2)
```

次の例では、演算子を使用して変数の値を小さくする方法を示し `-=` ます。

```powershell
$a = 8
$a -= 2
$a
```

```
6
```

また、代入演算子を使用して、 `-=` 数値配列のメンバーの値を小さくすることもできます。 これを行うには、変更する配列要素のインデックスを指定します。 次の例では、配列の3番目の要素の値 (要素 2) が1ずつ減少しています。

```powershell
$a = 1,2,3
$a[2] -= 1
$a
```

```
1
2
2
```

演算子を使用して変数の値を削除することはできません `-=` 。 変数に割り当てられているすべての値を削除するには、 [Clear Item](xref:Microsoft.PowerShell.Management.Clear-Item) または [clear variable](xref:Microsoft.PowerShell.Utility.Clear-Variable) コマンドレットを使用して、 `$null` 変数にまたはの値を割り当て `""` ます。

```powershell
$a = $null
```

特定の値を配列から削除するには、配列表記を使用して、特定の項目に値を割り当て `$null` ます。 たとえば、次のステートメントは、配列から2番目の値 (インデックス位置 1) を削除します。

```powershell
$a = 1,2,3
$a
```

```
1
2
3
```

```powershell
$a[1] = $null
$a
```

```
1
3
```

変数を削除するには、 [変数の削除](xref:Microsoft.PowerShell.Utility.Remove-Variable) コマンドレットを使用します。 このメソッドは、変数が特定のデータ型に明示的にキャストされ、型指定されていない変数を必要とする場合に便利です。 次のコマンドを実行すると、変数が削除され `$a` ます。

```powershell
Remove-Variable -Name a
```

### <a name="the-assignment-by-multiplication-operator"></a>乗算演算子による代入

乗算演算子による代入で `*=` は、数値を乗算するか、変数の文字列値の指定された数のコピーを追加します。

変数に1つの数値が含まれている場合、その値には演算子の右側の値が乗算されます。 たとえば、次の例では、演算子を使用して変数の値を乗算する方法を示してい `*=` ます。

```powershell
$a = 3
$a *= 4
$a
```

```
12
```

この場合、演算子は `*=` 2 つの操作を結合します。 まず、とを乗算し、次にを割り当てます。 したがって、次のステートメントは同等です。

```powershell
$a *= 2
$a = ($a * 2)
```

変数に文字列値が含まれている場合、PowerShell は次のように、指定された数の文字列を値に追加します。

```powershell
$a = "file"
$a *= 4
$a
```

```
filefilefilefile
```

配列の要素を乗算するには、インデックスを使用して、乗算する要素を指定します。 たとえば、次のコマンドは、配列の最初の要素 (インデックス位置 0) を2で乗算します。

```powershell
$a[0] *= 2
```

### <a name="the-assignment-by-division-operator"></a>除算演算子による代入

除算による代入演算子は、 `/=` 演算子の右辺に指定されている値で数値を除算します。 演算子は、文字列変数と共に使用することはできません。

演算子は、 `/=` 2 つの操作を結合します。 まず、を分割し、次にを割り当てます。 したがって、次の2つのステートメントは同等です。

```powershell
$a /= 2
$a = ($a / 2)
```

たとえば、次のコマンドでは、演算子を使用して `/=` 変数の値を除算しています。

```powershell
$a = 8
$a /=2
$a
```

```
4
```

配列の要素を分割するには、インデックスを使用して、変更する要素を識別します。 たとえば、次のコマンドは、配列内の2番目の要素 (インデックス位置 1) を2で除算します。

```powershell
$a[1] /= 2
```

### <a name="the-assignment-by-modulus-operator"></a>剰余演算子による代入

剰余演算子による代入では、 `%=` 変数の値が演算子の右辺の値によって除算されます。 次に、 `%=` 演算子は剰余 (剰余と呼ばれる) を変数に代入します。 この演算子は、変数に1つの数値が含まれている場合にのみ使用できます。 変数に文字列変数または配列が含まれている場合、この演算子は使用できません。

演算子は、 `%=` 2 つの操作を結合します。 まず、剰余を分割して決定し、その剰余を変数に代入します。 したがって、次のステートメントは同等です。

```powershell
$a %= 2
$a = ($a % 2)
```

次の例は、演算子を使用して商の剰余を保存する方法を示してい `%=` ます。

```powershell
$a = 7
$a %= 4
$a
```

```
3
```

## <a name="the-increment-and-decrement-operators"></a>インクリメント演算子とデクリメント演算子

インクリメント演算子は、 `++` 変数の値を1つ増やします。 単純なステートメントでインクリメント演算子を使用すると、値は返されません。 結果を表示するには、次のように変数の値を表示します。

```powershell
$a = 7
++$a
$a
```

```
8
```

値を強制的に返すには、次のように、変数と演算子をかっこで囲みます。

```powershell
$a = 7
(++$a)
```

```
8
```

インクリメント演算子は、変数の前 (プレフィックス) または後 (後置) に配置できます。 プレフィックスバージョンの演算子は、次のように、ステートメントでその値が使用される前に変数をインクリメントします。

```powershell
$a = 7
$c = ++$a
$a
```

```
8
```

```powershell
$c
```

```
8
```

後置バージョンの演算子は、その値がステートメントで使用された後に変数をインクリメントします。 次の例では、 `$c` `$a` 値が変更前にに割り当てられているため、変数と変数の値が異なり `$c` `$a` ます。

```powershell
$a = 7
$c = $a++
$a
```

```
8
```

```powershell
$c
```

```
7
```

デクリメント演算子は、 `--` 変数の値を1つ減らします。 インクリメント演算子と同様に、単純なステートメントで演算子を使用した場合、値は返されません。 次のように、かっこを使用して値を返します。

```powershell
$a = 7
--$a
$a
```

```
6
```

```powershell
(--$a)
```

```
5
```

前置バージョンの演算子は、次のように、ステートメントでその値が使用される前に変数をデクリメントします。

```powershell
$a = 7
$c = --$a
$a
```

```
6
```

```powershell
$c
```

```
6
```

後置バージョンの演算子は、その値がステートメントで使用された後に変数をデクリメントします。 次の例では、 `$d` `$a` 値が変更前にに割り当てられているため、変数と変数の値が異なり `$d` `$a` ます。

```powershell
$a = 7
$d = $a--
$a
```

```
6
```

```powershell
$d
```

```
7
```

## <a name="microsoft-net-framework-types"></a>Microsoft .NET Framework の型

既定では、変数に値が1つしかない場合、変数に割り当てられた値によって変数のデータ型が決まります。 たとえば、次のコマンドでは、"Integer" (system.string) 型の変数が作成されます。

```powershell
$a = 6
```

変数の .NET Framework 型を確認するには、次のように **GetType** メソッドとその **FullName** プロパティを使用します。 メソッド呼び出しに引数がない場合でも、必ず **GetType** メソッド名の後にかっこを含めてください。

```powershell
$a = 6
$a.GetType().FullName
```

```
System.Int32
```

文字列を含む変数を作成するには、変数に文字列値を割り当てます。 値が文字列であることを示すには、次のように引用符で囲みます。

```powershell
$a = "6"
$a.GetType().FullName
```

```
System.String
```

変数に割り当てられた最初の値が文字列の場合、PowerShell はすべての操作を文字列操作として扱い、新しい値を文字列にキャストします。
これは、次の例のようになります。

```powershell
$a = "file"
$a += 3
$a
```

```
file3
```

最初の値が整数の場合、PowerShell はすべての操作を整数演算として扱い、新しい値を整数にキャストします。 これは、次の例のようになります。

```powershell
$a = 6
$a += "3"
$a
```

```
9
```

変数名または最初の代入値の前に角かっこで囲んで型名を指定することにより、新しいスカラー変数を任意の .NET Framework 型としてキャストできます。 変数をキャストするときに、変数に格納できるデータの種類を決定できます。 また、変数を操作するときの動作を決定することもできます。

たとえば、次のコマンドは、変数を文字列型としてキャストします。

```powershell
[string]$a = 27
$a += 3
$a
```

```
273
```

次の例では、変数をキャストするのではなく、最初の値をキャストしています。

```powershell
$a = [string]27
```

変数を特定の型にキャストする場合、一般的な規則として、値ではなく変数をキャストします。 ただし、既存の変数の値を新しいデータ型に変換できない場合は、その変数のデータ型を再キャストすることはできません。 データ型を変更するには、次のように値を置き換える必要があります。

```powershell
$a = "string"
[int]$a
```

```
Cannot convert value "string" to type "System.Int32". Error: "Input string was
not in a correct format." At line:1 char:8 + [int]$a <<<<
```

```powershell
[int]$a = 3
```

さらに、変数名の前にデータ型を指定した場合は、別のデータ型を指定して明示的に型をオーバーライドしない限り、その変数の型はロックされます。 既存の型と互換性のない値を割り当てようとし、明示的に型をオーバーライドしていない場合は、次の例に示すように、PowerShell によってエラーが表示されます。

```powershell
$a = 3
$a = "string"
[int]$a = 3
$a = "string"
```

```
Cannot convert value "string" to type "System.Int32". Error: "Input
string was not in a correct format."
At line:1 char:3
+ $a <<<<  = "string"
```

```powershell
[string]$a = "string"
```

PowerShell では、配列内の複数の項目を含む変数のデータ型は、1つの項目を含む変数のデータ型とは異なる方法で処理されます。 データ型が明示的に配列変数に代入されていない限り、データ型は常にに `System.Object []` なります。 このデータ型は配列に固有です。

場合によっては、別の型を指定することで既定の型をオーバーライドできます。 たとえば、次のコマンドは、変数を配列型としてキャストし `string []` ます。

```powershell
[string []] $a = "one", "two", "three"
```

PowerShell 変数は、任意の .NET Framework データ型にすることができます。 また、現在のプロセスで使用できる任意の完全修飾 .NET Framework データ型を割り当てることができます。 たとえば、次のコマンドはデータ型を指定し `System.DateTime` ます。

```powershell
[System.DateTime]$a = "5/31/2005"
```

変数には、データ型に準拠した値が割り当てられ `System.DateTime` ます。 変数の値は `$a` 次のようになります。

```
Tuesday, May 31, 2005 12:00:00 AM
```

## <a name="assigning-multiple-variables"></a>複数の変数の割り当て

PowerShell では、1つのコマンドを使用して、複数の変数に値を割り当てることができます。 代入値の最初の要素が最初の変数に割り当てられ、2番目の要素が2番目の変数に割り当てられ、3番目の要素が3番目の変数に代入されます。 たとえば、次のコマンドでは、変数に値1、値2を変数に、値3を変数に代入してい `$a` `$b` `$c` ます。

```powershell
$a, $b, $c = 1, 2, 3
```

代入値に変数よりも多くの要素が含まれている場合は、残りのすべての値が最後の変数に代入されます。 たとえば、次のコマンドには、3つの変数と5つの値が含まれています。

```powershell
$a, $b, $c = 1, 2, 3, 4, 5
```

したがって、PowerShell は変数に値1を代入 `$a` し、値2を `$b` 変数に割り当てます。 変数に値3、4、および5が割り当てられ `$c` ます。
変数の値を `$c` 他の3つの変数に割り当てるには、次の形式を使用します。

```powershell
$d, $e, $f = $c
```

このコマンドは、変数に値3を代入し、 `$d` 値4を変数に、 `$e` 値5を変数に代入し `$f` ます。

代入値に含まれる要素の数が変数よりも少ない場合、末尾の残りのすべての変数には値が割り当てられません。 たとえば、次のコマンドには、3つの変数と2つの値が含まれています。

```powershell
$a, $b, $c = 1, 2
```

したがって、PowerShell は変数に値1を代入 `$a` し、値2を `$b` 変数に割り当てます。 変数に値は割り当てられません `$c` 。

変数を連結することによって、複数の変数に1つの値を割り当てることもできます。 たとえば、次のコマンドでは、4つの変数すべてに "3" という値が割り当てられます。

```powershell
$a = $b = $c = $d = "three"
```

## <a name="variable-related-cmdlets"></a>変数関連のコマンドレット

代入演算を使用して変数の値を設定するだけでなく、変数の [設定](xref:Microsoft.PowerShell.Utility.Set-Variable) コマンドレットを使用することもできます。 たとえば、次のコマンドでは、を使用して、 `Set-Variable` 変数に1、2、3の配列を割り当て `$a` ます。

```powershell
Set-Variable -Name a -Value 1, 2, 3
```

## <a name="see-also"></a>関連項目

[about_Arrays](about_Arrays.md)

[about_Hash_Tables](about_Hash_Tables.md)

[about_Variables](about_Variables.md)

[Clear-Variable](xref:Microsoft.PowerShell.Utility.Clear-Variable)

[Remove-Variable](xref:Microsoft.PowerShell.Utility.Remove-Variable)

[Set-Variable](xref:Microsoft.PowerShell.Utility.Set-Variable)
